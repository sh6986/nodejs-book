### npm 이란

Node Package Manager

- 노드의 패키지 매니저
- 다른 사람들이 만든 소스코드들을 모아둔 저장소

### package.json

현재 프로젝트에 대한 정보와 사용 중인 패키지에 대한 정보를 담은 파일

- 같은 패키지라도 버전별로 기능이 다를 수 있으므로 버전을 기록해두어야 함
- 동일한 버전을 설치하지 않으면 문제가 생길 수 있음
- 노드 프로젝트 시작 전 package.json 부터 만들고 시작함(npm init)

### package.json 속성들

- package name: 패키지의 이름. package.json의 name 속성에 저장됨
- version: 패키지의 버전. npm의 버전은 다소 엄격하게 관리됨
- entry point: 자바스크립트 실행 파일 진입점. 보통 마지막으로 module.exports를 하는 파일을 지정. package.json의 main 속성에 저장
- test command: 코드를 테스트할 때 입력할 명령어 의미. package.json scripts 속성 안의 test 속성에 저장됨
- git repository: 코드를 저장해둔 Git 저장소 주소를 의미. 나중에 소스에 문제가 생겼을 때 사용자들이 이 저장소에 방문해 문제를 제기할 수 도 있고 코드 수정본을 올릴 수도 있다. package.json의 repository 속성에 저장됨
- keywords: 키워드는 npm 공식 홈페이지에서 패키지를 쉽게 찾을 수 있게 해준다. package.json의 keywords 속성에 저장됨
- license: 해당 패키지의 라이센스를 넣어주면 된다.

### npm 스크립트

npm init 이 완료되면 폴더에 package.json 이 생성됨

npm run [스크립트명]으로 스크립트 실행

### 패키지 설치하기

express 설치하기

npm install express

package.json에 기록됨

### node_modules

npm install 시 node_modules 폴더 생성

- 내부에 설치한 패키지들이 들어 있음
- express 외에도 express 와 의존관계가 있는 패키지들이 모두 설치됨
- package-lock.json 도 생성되어 패키지 간 의존관계를 명확하게 표시함

### 여러 패키지 동시 설치하기

npm install 패키지1 패키지2 패키지3 ...

### 개발용 패키지

npm install —save-dev 패키지명 또는 npm i -D 패키지명

- devDependencies 에 추가됨

### 글로벌(전역)패키지

npm install —global 패키지명 또는 npm i -g 패키지명

- 모든 프로젝트와 콘솔에서 패키지를 사용할 수 있음
- 예제는 rm -rf(리눅스의 삭제 명령)를 흉내내는 rimraf 패키지의 글로벌 설치
- npx로 글로벌 설치 없이 글로벌 명령어 사용 가능

npm install —global rimraf

### SemVer 버저닝

노드 패키지의 버전은 SemVer(유의적 버저닝) 방식을 따름

- Major(주 버전), Minor(부 버전), Patch(수 버전)
- 노드에서는 배포를 할 때 항상 버전을 올려야 함
- Major 는 하위 버전과 호환되지 않은 수정사항이 생겼을 때 올림
- Minor는 하위버전과 호환되는 수정사항이 생겼을 때 올림
- Patch는 기능에 버그를 해결했을 때 올림

### 버전 기호 사용하기

버전 앞에 기호를 붙여 의미를 더함

- ^1.1.1: 패키지 업데이트시 minor 버전까지만 업데이트됨 (2.0.0 버전은 안됨)
- ~1.1.1: 패키지 업데이트 시 patch 버전까지만 업데이트 됨 (1.2.0 버전은 안됨)
- ≥, ≤, >, < 는 이상, 이하, 초과, 미만
- @latest는 최신 버전을 설치하라는 의미
- 실험적인 버전이 존재한다면 @next로 실험적인 버전 설치 가능(불안정함)
- 각 버전마다 부가적으로 알파/베타/RC버전이 존재할 수도 있음

### 기타 명령어

- npm outdated: 어떤 패키지에 기능 변화가 생겼는지 알 수 있음
- npm update: package.json 에 따라 패키지 업데이트
- npm uninstall 패키지명: 패키지 삭제(npm rm 패키지명으로도 가능)
- npm search 검색어: npm 패키지를 검색할 수 있음(npmjs.com에서도 가능)
- npm info 패키지명: 패키지의 세부 정보 파악 가능
- npm login: npm에 로그인을 하기 위한 명령어(npmjs.com 에서 회원가입 필요)
- npm whoami: 현재 사용자가 누구인지 알려줌
- npm logout: 로그인한 계정을 로그아웃
- npm version 버전: package.json의 버전을 올림(Git에 커밋도 함)
- npm deprecate [패키지명][버전] [메시지]: 패키지를 설치할 때 경고 메시지를 띄우게 함(오류가 있는 패키지에 적용)
- npm publish: 자신이 만든 패키지를 배포
- npm unpublish —force: 자신이 만든 패키지를 배포 중단(배포 후  72시간 내에만 가능)
    - 다른 사람이 내 패키지를 사용하고 있는데 배포가 중단되면 문제가 생기기 때문